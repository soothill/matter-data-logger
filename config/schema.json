{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Matter Data Logger Configuration",
  "type": "object",
  "properties": {
    "influxdb": {
      "type": "object",
      "properties": {
        "url": { "type": "string", "format": "uri" },
        "token": { "type": "string", "minLength": 8 },
        "organization": { "type": "string" },
        "bucket": { "type": "string" }
      },
      "required": ["url", "token", "organization", "bucket"]
    },
    "matter": {
      "type": "object",
      "properties": {
        "discovery_interval": { "type": "string", "pattern": "^[0-9]+(ns|us|ms|s|m|h)$" },
        "poll_interval": { "type": "string", "pattern": "^[0-9]+(ns|us|ms|s|m|h)$" },
        "service_type": { "type": "string" },
        "domain": { "type": "string" },
        "readings_channel_size": { "type": "integer", "minimum": 1, "maximum": 10000 }
      },
      "required": ["discovery_interval", "poll_interval", "service_type", "domain"]
    },
    "logging": {
      "type": "object",
      "properties": {
        "level": { "type": "string", "enum": ["debug", "info", "warn", "error", "fatal", "panic"] }
      },
      "required": ["level"]
    },
    "notifications": {
      "type": "object",
      "properties": {
        "slack_webhook_url": { "type": "string", "format": "uri" }
      }
    },
    "cache": {
      "type": "object",
      "properties": {
        "directory": { "type": "string" },
        "max_size": { "type": "integer", "minimum": 1 },
        "max_age": { "type": "string", "pattern": "^[0-9]+(ns|us|ms|s|m|h)$" }
      },
      "required": ["directory", "max_size", "max_age"]
    }
  },
  "required": ["influxdb", "matter", "logging", "cache"]
}
